window.tsfem={nonce:tsfemL10n.nonce,i18n:tsfemL10n.i18n,rtl:tsfemL10n.rtl,debug:tsfemL10n.debug,b:!1,o:function(a){tsfem.b=!0;setTimeout(function(){tsfem.b=!1},a)},a:function(){var a=jQuery(".tsfem-has-hover-balloon");a.off("mouseenter mousemove mouseleave mouseout");a.children("*").off("mouseenter mousemove mouseleave");jQuery(document.body).off("click touchstart MSPointerDown",tsfem.h);a.children("*").on({mouseenter:function(a){jQuery(a.target).parents(".tsfem-has-hover-balloon").trigger("mouseenter")},
mousemove:function(a){jQuery(a.target).parents(".tsfem-has-hover-balloon").trigger("mousemove",a.pageX)},mouseleave:function(a){jQuery(a.target).parents(".tsfem-has-hover-balloon").trigger("mouseleave")}});a.on({mouseenter:tsfem.j,mousemove:tsfem.l,mouseleave:tsfem.f,mouseout:tsfem.f});jQuery(document.body).on("click touchstart MSPointerDown",tsfem.h)},j:function(a){var c=jQuery(a.target);if(!c.hasClass("tsfem-has-hover-balloon"))return!1;a=c.data("desc");var b=c.next("div.tsfem-desc-balloon").length||
c.children("div.tsfem-desc-balloon").length;if(a&&!b&&(c.prop("title",""),c.append('<div class="tsfem-desc-balloon"><span>'+a+"</span><div></div></div>"),a=c.children("div.tsfem-desc-balloon"),c=c.outerHeight()+8,a.css("bottom",c+"px"),b=a.closest(".tsfem-pane-content"),c=a.children("span"),"undefined"!==b&&0<b.length)){var b=b.offset().left+b.outerWidth(),d=c.offset().left+c.outerWidth();(tsfem.rtl?d<c.width():d>b-20)&&a.css(tsfem.rtl?"right":"left",(tsfem.rtl?-(d+20):b-d-20)+"px")}},l:function(a,
c){var b=jQuery(a.target);if(!b.hasClass("tsfem-has-hover-balloon"))return!1;if(b.data("desc")){var b=b.children("div.tsfem-desc-balloon"),d=b.children("span");if(0!==d.length){var b=b.children("div"),e=b.outerWidth()/2,f=c?c:a.pageX,k=d.offset().left,h=f-k-e,g=tsfem.rtl?"right":"left";if(1>h)d=tsfem.rtl?d.width():0,b.css(g,d+"px");else{var m=d.outerWidth();f>k+m-e?(d=tsfem.rtl?0:d.width(),b.css(g,d+"px")):(d=tsfem.rtl?-d.width():(m-d.width())/2-e,b.css(g,(tsfem.rtl?-(h+d):h+d)+"px"))}}}},f:function(a){if(!tsfem.b){if(!jQuery(a.target).hasClass("tsfem-has-hover-balloon"))return!1;
jQuery(a.target).find("div.tsfem-desc-balloon").remove()}},h:function(a){tsfem.b||(tsfem.o(200),a=jQuery(a.target),a.next("div.tsfem-desc-balloon").length||a.children("div.tsfem-desc-balloon").length||(a=jQuery(".tsfem-has-hover-balloon").find("div.tsfem-desc-balloon"),a.length&&(a.detach(),tsfem.a())))},setAjaxLoader:function(a){jQuery(a).toggleClass("tsfem-loading")},unsetAjaxLoader:function(a,c,b,d){var e="tsfem-success",f=2500;c?2===c&&(e="tsfem-unknown",f=7500):(e="tsfem-error",f=d?2E4:1E4);
f=b?2*f:f;d?jQuery(a).removeClass("tsfem-loading").addClass(e).html(b).fadeOut(f):(b=jQuery("<span/>").html(b).text(),jQuery(a).removeClass("tsfem-loading").addClass(e).text(b).fadeOut(f))},resetAjaxLoader:function(a){jQuery(a).stop().empty().prop("class","tsfem-ajax").css({opacity:"1",display:"initial"}).prop("style","")},v:function(a){var c=jQuery(a.target),b=0;if(!c.prop("disabled")){c.addClass("tsfem-button-disabled");c.prop("disabled",!0);tsfem.resetAjaxLoader("#tsfem-feed-ajax");tsfem.setAjaxLoader("#tsfem-feed-ajax");
var d={method:"POST",url:ajaxurl,c:"json",data:{action:"tsfem_enable_feeds",nonce:tsfem.nonce},timeout:12E3,async:!0,success:function(a){a=tsfem.convertJSONResponse(a);tsfem.debug&&console.log(a);var c=a&&a.data||void 0;if("success"===(a&&a.type||void 0)&&c)switch(a=c.content,a.status){case "success":b=1;jQuery(".tsfem-trends-wrap").empty().css("opacity",0).append(a.wrap).animate({opacity:1},{queue:!0,duration:250},"swing");for(var e=400,c=a.data.length,h=0,g=1;g<c-1;g++)h+=Math.round(400/Math.pow(1+
g/2/100,2));h-=2*e+200;jQuery.each(a.data,function(a,c){e=Math.round(400/Math.pow(1+a/2/100,2));setTimeout(function(){jQuery(c).hide().appendTo(".tsfem-feed-wrap").slideDown(e)},200*a)});setTimeout(function(){tsfem.updatedResponse("#tsfem-feed-ajax",b,"",0)},h);break;default:jQuery(".tsfem-trends-wrap").empty().css("opacity",0).append(a.w).css("opacity",1).find(".tsfem-feed-wrap").css({opacity:0}).animate({opacity:1},{queue:!0,duration:2E3},"swing"),b="unknown_error"===a.status?2:0,setTimeout(function(){tsfem.updatedResponse("#tsfem-feed-ajax",
b,tsfem.i18n.UnknownError,0)},1E3)}else"unknown"===a.type&&(b=2),d.s},error:function(a,b,d){a=tsfem.getAjaxError(a,b,d);c.removeClass("tsfem-button-disabled");c.prop("disabled",!1);tsfem.updatedResponse("#tsfem-feed-ajax",0,a,0)},s:function(){c.removeClass("tsfem-button-disabled");c.prop("disabled",!1);tsfem.updatedResponse("#tsfem-feed-ajax",b,tsfem.i18n.UnknownError,0)},complete:function(){}};jQuery.ajax(d)}},u:function(a){var c=jQuery(a.target),b=jQuery(".tsfem-button-extension-activate, .tsfem-button-extension-deactivate").not(jQuery(".tsfem-button-disabled")),
d=c.data("slug"),e=c.data("case");c.prop("disabled")||(b.map(function(){jQuery(this).addClass("tsfem-button-disabled");jQuery(this).prop("disabled",!0)}),tsfem.resetAjaxLoader("#tsfem-extensions-ajax"),tsfem.setAjaxLoader("#tsfem-extensions-ajax"),jQuery.ajax({method:"POST",url:ajaxurl,c:"json",data:{action:"tsfem_update_extension",nonce:tsfem.nonce,slug:d,"case":e},timeout:1E4,async:!0,success:function(a){a=tsfem.convertJSONResponse(a);tsfem.debug&&console.log(a);var b=a&&a.data||void 0;a=a&&a.type||
void 0;if(b&&a)if(a=b.status.success,b=b.status.notice,-1===a)tsfem.updatedResponse("#tsfem-extensions-ajax",0,b,0);else if("activate"===e)if(!1===a)tsfem.updatedResponse("#tsfem-extensions-ajax",0,b,0);else switch(a){case 10001:tsfem.updatedResponse("#tsfem-extensions-ajax",0,b,0);break;case 10002:tsfem.updatedResponse("#tsfem-extensions-ajax",0,b,0);break;case 10003:tsfem.updatedResponse("#tsfem-extensions-ajax",0,b,0);break;case 10004:tsfem.updatedResponse("#tsfem-extensions-ajax",0,b,0);break;
case 10005:tsfem.updatedResponse("#tsfem-extensions-ajax",0,b,1);tsfem.a();break;case 10006:tsfem.updatedResponse("#tsfem-extensions-ajax",2,b,0);break;default:c.removeClass("tsfem-button-extension-activate").addClass("tsfem-button-extension-deactivate"),c.data("case","deactivate"),c.text(tsfem.i18n.Deactivate),tsfem.updatedResponse("#tsfem-extensions-ajax",1,b,0),jQuery("#"+d+"-extension-entry").removeClass("tsfem-extension-deactivated").addClass("tsfem-extension-activated"),tsfem.i(d,e)}else"deactivate"===
e?!1===a?tsfem.updatedResponse("#tsfem-extensions-ajax",0,b,0):(c.removeClass("tsfem-button-extension-deactivate").addClass("tsfem-button-extension-activate"),c.data("case","activate"),c.text(tsfem.i18n.Activate),tsfem.updatedResponse("#tsfem-extensions-ajax",1,b,0),jQuery("#"+d+"-extension-entry").removeClass("tsfem-extension-activated").addClass("tsfem-extension-deactivated"),tsfem.i(d,e)):tsfem.updatedResponse("#tsfem-extensions-ajax",0,tsfem.i18n.UnknownError,0);else tsfem.updatedResponse("#tsfem-extensions-ajax",
0,tsfem.i18n.InvalidResponse,0)},error:function(a,b,c){a=tsfem.getAjaxError(a,b,c);tsfem.updatedResponse("#tsfem-extensions-ajax",0,a,0)},complete:function(){b.removeClass("tsfem-button-disabled");b.prop("disabled",!1)}}))},convertJSONResponse:function(a){var c=1===(a.json||!1)||!1;if(!c){var b=a;try{a=jQuery.parseJSON(a),c=!0}catch(d){c=!1}c||(a=b)}return a},updatedResponse:function(a,c,b,d){switch(c){case 0:tsfem.unsetAjaxLoader(a,0,b,d);break;case 1:tsfem.unsetAjaxLoader(a,1,b,d);break;case 2:tsfem.unsetAjaxLoader(a,
2,b,d);break;default:tsfem.resetAjaxLoader(a)}},getAjaxError:function(a,c,b){tsfem.debug&&(console.log(a.responseText),console.log(b));switch(b){case "abort":case "timeout":a=tsfem.i18n.TimeoutError;break;case "Internal Server Error":a=tsfem.i18n.FatalError;break;case "parsererror":a=tsfem.i18n.ParseError;break;default:a=tsfem.i18n.UnknownError}return a},matosa:function(a,c,b){c=c||"[";b=b||"]";var d=null,e="";(function k(a,g){g++;if("object"===typeof a){var h;for(h in a)var l=a[h];d=l;e=1===g?e+
(h+k(l,g)):e+(c+h+b+k(l,g))}else if(1===g)return d=null,e=!1;return e})(a,0);if(!1===e)return!1;a={};a[e]=d;return a},i:function(a,c){jQuery.ajax({method:"POST",url:ajaxurl,c:"json",data:{action:"tsfem_update_extension_desc_footer",nonce:tsfem.nonce,slug:a,"case":c},timeout:3E3,async:!0,success:function(b){b=tsfem.convertJSONResponse(b);tsfem.debug&&console.log(b);var d=b&&b.data||void 0;if(d){var e=jQuery("#"+a+"-extension-entry .tsfem-extension-description-footer"),f="activate"===c?"up":"down";
e.addClass("tsfem-flip-hide-"+f);setTimeout(function(){e.empty().append(d);tsfem.a()},250);setTimeout(function(){e.addClass("tsfem-flip-show-"+f)},500);setTimeout(function(){e.removeClass("tsfem-flip-hide-"+f+" tsfem-flip-show-"+f)},750)}},error:function(a,c,e){tsfem.debug&&(console.log(a.responseText),console.log(e))},complete:function(){}})},preventDefault:function(a){a.preventDefault();a.stopPropagation()},m:function(a){var c=jQuery('.tsfem-switch-button-container > input[type="checkbox"]:checked');
if("undefined"!==typeof c&&0<c.length){var b=c.parents(".tsfem-switch-button-container-wrap");1>jQuery(a.target).closest(b).length&&c.prop("checked",!1)}},g:function(){var a=jQuery(".tsfem-extensions-overview-content").children(".tsfem-extension-entry-wrap"),c=a.length;c%2&&2<c&&(c=a.first(),a=a.last(),782>window.innerWidth?a.delay(10).css({"max-width":""}):a.delay(10).css({"max-width":c.width()}))},ready:function(a){a("div.updated, div.error, div.notice-warning").insertAfter("section.tsfem-top-wrap");
a("a#tsfem-enable-feeds").on("click",tsfem.v);a("a.tsfem-button-extension-activate, a.tsfem-button-extension-deactivate").on("click",tsfem.u);a("a.tsfem-button-disabled").on("click",tsfem.preventDefault);a(document.body).ready(tsfem.a);a(document.body).ready(tsfem.g);a(window).on("resize orientationchange",tsfem.g);a(window).on("click touchend MSPointerUp",tsfem.m)}};jQuery(tsfem.ready);
