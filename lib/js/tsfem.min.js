window.tsfem={nonce:tsfemL10n.nonce,i18n:tsfemL10n.i18n,rtl:tsfemL10n.rtl,debug:tsfemL10n.debug,a:function(){var a=jQuery(".tsfem-has-hover-balloon");a.children("*").on({mouseenter:function(b){jQuery(b.target).parents(".tsfem-has-hover-balloon").trigger("mouseenter")},mousemove:function(b){jQuery(b.target).parents(".tsfem-has-hover-balloon").trigger("mousemove",b.pageX)},mouseleave:function(b){jQuery(b.target).parents(".tsfem-has-hover-balloon").trigger("mouseleave")}});a.on({mouseenter:tsfem.g,mousemove:tsfem.h,
mouseleave:tsfem.b,mouseout:tsfem.b});jQuery(document.body).on("click touchstart MSPointerDown",tsfem.j)},g:function(a){var b=jQuery(a.target);if(!b.hasClass("tsfem-has-hover-balloon"))return!1;if((a=b.data("desc"))&&0===b.children("div.tsfem-desc-balloon").length){b.prop("title","");b.append('<div class="tsfem-desc-balloon"><span>'+a+"</span><div></div></div>");a=b.children("div.tsfem-desc-balloon");b=b.outerHeight()+8;a.css("bottom",b+"px");var c=a.closest(".tsfem-pane-content"),b=a.children("span");
if("undefined"!==c&&0<c.length){var c=c.offset().left+c.outerWidth(),d=b.offset().left+b.outerWidth();(tsfem.rtl?d<b.width():d>c-20)&&a.css(tsfem.rtl?"right":"left",(tsfem.rtl?-(d+20):c-d-20)+"px")}}},h:function(a,b){var c=jQuery(a.target);if(!c.hasClass("tsfem-has-hover-balloon"))return!1;if(c.data("desc")){var c=c.children("div.tsfem-desc-balloon"),d=c.children("span");if(0!==d.length){var c=c.children("div"),e=c.outerWidth()/2,f=b?b:a.pageX,k=d.offset().left,g=f-k-e,h=tsfem.rtl?"right":"left";
if(1>g)d=tsfem.rtl?d.width():"0",c.css(h,d+"px");else{var l=d.outerWidth();f>k+l-e?(d=tsfem.rtl?"0":d.width(),c.css(h,d+"px")):(d=tsfem.rtl?-d.width():(l-d.width())/2-e,c.css(h,(tsfem.rtl?-(g+d):g+d)+"px"))}}}},b:function(a){if(!jQuery(a.target).hasClass("tsfem-has-hover-balloon"))return!1;jQuery(a.target).find("div.tsfem-desc-balloon").remove()},j:function(){var a=jQuery(document.body.target),b=jQuery(".tsfem-has-hover-balloon");a.closest(b).length||b.find("div.tsfem-desc-balloon").remove()},setAjaxLoader:function(a){jQuery(a).toggleClass("tsfem-loading")},
unsetAjaxLoader:function(a,b,c,d){var e="tsfem-success",f=2500;b?2===b&&(e="tsfem-unknown",f=7500):(e="tsfem-error",f=d?2E4:1E4);f=c?2*f:f;d?jQuery(a).removeClass("tsfem-loading").addClass(e).html(c).fadeOut(f):(c=jQuery("<span/>").html(c).text(),jQuery(a).removeClass("tsfem-loading").addClass(e).text(c).fadeOut(f))},resetAjaxLoader:function(a){jQuery(a).stop().empty().prop("class","tsfem-ajax").css({opacity:"1",display:"initial"}).prop("style","")},m:function(a){var b=jQuery(a.target),c=0;b.prop("disabled")||
(b.addClass("tsfem-button-disabled"),b.prop("disabled",!0),tsfem.resetAjaxLoader("#tsfem-feed-ajax"),tsfem.setAjaxLoader("#tsfem-feed-ajax"),jQuery.ajax({method:"POST",url:ajaxurl,f:"json",data:{action:"tsfem_enable_feeds",nonce:tsfem.nonce},timeout:1E4,async:!0,success:function(a){a=jQuery.parseJSON(a);"success"===a.type&&a.content?(c=1,jQuery(".tsfem-trends-wrap").empty().css("opacity",0).append(a.content).css("opacity",1).find(".tsfem-feed-wrap").css({opacity:0}).animate({opacity:1},{queue:!0,
duration:2E3},"swing"),setTimeout(function(){tsfem.updatedResponse("#tsfem-feed-ajax",c,"",0)},1E3)):("unknown"===a.type?(c=2,jQuery(".tsfem-trends-wrap").empty().append(a.content)):(b.removeClass("tsfem-button-disabled"),b.prop("disabled",!1)),tsfem.updatedResponse("#tsfem-feed-ajax",c,"",0))},error:function(){b.removeClass("tsfem-button-disabled");b.prop("disabled",!1);tsfem.updatedResponse("#tsfem-feed-ajax",0,"",0)}}))},l:function(a){var b=jQuery(a.target),c=jQuery(".tsfem-button-extension-activate, .tsfem-button-extension-deactivate").not(jQuery(".tsfem-button-disabled")),
d=b.data("slug"),e=b.data("case");b.prop("disabled")||(c.map(function(){jQuery(this).addClass("tsfem-button-disabled");jQuery(this).prop("disabled",!0)}),tsfem.resetAjaxLoader("#tsfem-extensions-ajax"),tsfem.setAjaxLoader("#tsfem-extensions-ajax"),jQuery.ajax({method:"POST",url:ajaxurl,f:"json",data:{action:"tsfem_update_extension",nonce:tsfem.nonce,slug:d,"case":e},timeout:1E4,async:!0,success:function(a){a=jQuery.parseJSON(a);if("undefined"===typeof a.status||"undefined"===typeof a.status.success||
"undefined"===typeof a.status.notice)tsfem.updatedResponse("#tsfem-extensions-ajax",0,"",0);else{var c=a.status.success;a=a.status.notice;if(-1===c)tsfem.updatedResponse("#tsfem-extensions-ajax",0,a,0);else if("activate"===e)if(!1===c)tsfem.updatedResponse("#tsfem-extensions-ajax",0,a,0);else switch(c){case 10001:tsfem.updatedResponse("#tsfem-extensions-ajax",0,a,0);break;case 10002:tsfem.updatedResponse("#tsfem-extensions-ajax",0,a,0);break;case 10003:tsfem.updatedResponse("#tsfem-extensions-ajax",
0,a,0);break;case 10004:tsfem.updatedResponse("#tsfem-extensions-ajax",0,a,0);break;case 10005:tsfem.updatedResponse("#tsfem-extensions-ajax",0,a,1);tsfem.a();break;case 10006:tsfem.updatedResponse("#tsfem-extensions-ajax",2,a,0);break;default:b.removeClass("tsfem-button-extension-activate").addClass("tsfem-button-extension-deactivate"),b.data("case","deactivate"),b.text(tsfem.i18n.Deactivate),tsfem.updatedResponse("#tsfem-extensions-ajax",1,a,0),jQuery("#"+d+"-extension-entry").removeClass("tsfem-extension-deactivated").addClass("tsfem-extension-activated")}else"deactivate"===
e?!1===c?tsfem.updatedResponse("#tsfem-extensions-ajax",0,a,0):(b.removeClass("tsfem-button-extension-deactivate").addClass("tsfem-button-extension-activate"),b.data("case","activate"),b.text(tsfem.i18n.Activate),tsfem.updatedResponse("#tsfem-extensions-ajax",1,a,0),jQuery("#"+d+"-extension-entry").removeClass("tsfem-extension-activated").addClass("tsfem-extension-deactivated")):tsfem.updatedResponse("#tsfem-extensions-ajax",0,"",0)}},error:function(a,b,c){tsfem.debug&&(console.log(a.responseText),
console.log(c));tsfem.updatedResponse("#tsfem-extensions-ajax",0,"",0)},complete:function(){c.removeClass("tsfem-button-disabled");c.prop("disabled",!1)}}))},updatedResponse:function(a,b,c,d){switch(b){case 0:tsfem.unsetAjaxLoader(a,0,c,d);break;case 1:tsfem.unsetAjaxLoader(a,1,c,d);break;case 2:tsfem.unsetAjaxLoader(a,2,c,d);break;default:tsfem.resetAjaxLoader(a)}},preventDefault:function(a){a.preventDefault();a.stopPropagation()},i:function(a){var b=jQuery('.tsfem-switch-button-container > input[type="checkbox"]:checked');
if("undefined"!==typeof b&&0<b.length){var c=b.parents(".tsfem-switch-button-container-wrap");1>jQuery(a.target).closest(c).length&&b.prop("checked",!1)}},c:function(){var a=jQuery(".tsfem-extensions-overview-content").children(".tsfem-extension-entry-wrap"),b=a.length;b%2&&2<b&&(b=a.first(),a.last().delay(10).css({"max-width":b.width()}))},ready:function(a){a("div.updated, div.error, div.notice-warning").insertAfter("section.tsfem-top-wrap");a("a#tsfem-enable-feeds").on("click",tsfem.m);a("a.tsfem-button-extension-activate, a.tsfem-button-extension-deactivate").on("click",
tsfem.l);a("a.tsfem-button-disabled").on("click",tsfem.preventDefault);a(document.body).ready(tsfem.a);a(document.body).ready(tsfem.c);a(window).on("resize orientationchange",tsfem.c);a(window).on("click touchend MSPointerUp",tsfem.i)}};jQuery(tsfem.ready);
